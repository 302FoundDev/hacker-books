---
import SearchField from './SearchField.astro'
import { getCollection } from 'astro:content'

const books = await getCollection('books')
---

<div class='mx-auto max-w-screen-xl px-4 justify-center flex flex-col items-center'>
  <section>
    <SearchField />
  </section>
  <div class='flex flex-col gap-14'>
    {
      books.map((book) => {
        const { slug, data } = book
        const { title, img, description, author } = data

        return (
          <article class='flex sm:flex-col-reverse lg:flex-row'>
            <a 
              href={`/books/${slug}`}
              class='mb-2 p-0 lg:pr-[16px] transition hover:scale-110'
            >
              <img
                transition:name={`img-${slug}`}
                src={img}
                alt='Hacker books' 
                class='transition rounded-md lg:max-w-60' />
            </a>
            
            <div class='flex flex-col justify-center gap-2 my-[24px] lg:justify-between'>
              <h2 transition:name={`title-${slug}`} class='max-w-sm text-2xl font-semibold'>
                {title}
              </h2>

              <p class='italic max-w-sm opacity-75'>
                {description}
              </p>

              <p class='hidden lg:flex'>
                <span class='opacity-75'>Author: </span>
                {author}
              </p>
            </div>
          </article>
        )
      })
    }
  </div>
</div>
